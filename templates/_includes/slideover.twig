{% set showCloseButton = showCloseButton ?? true %}
{% set closeButtonPosition = closeButtonPosition ?? "left" %}
{% set showNav = showNav ?? true %}
{% set navStyle = navStyle ?? "icon" %}

{# For grid layout #}
{% set panelContent = panelContent ?? null %}

{# For fixed layout relative to slidover fill #}
{% set fixedContent = fixedContent ?? null %}

{# Slideover #}
<div
  x-dialog
  x-model="showSlideover"
  style="display: none"
  class="fixed inset-0 z-10"
>
  {# Backdrop overlay #}
  <div
    x-dialog:overlay
    x-transition.opacity.duration.500ms
    class="hidden md:block fixed inset-0 bg-[#eee] bg-opacity-90 backdrop-blur-[3px]"
  ></div>

  {# Panel background (white fill) #}
  <div
    class="fixed inset-y-0 inset-x-0 bg-white md:left-auto md:right-0 md:w-[var(--panel-w)] 3xl:w-[var(--3xl-panel-w)]"
    x-show="showSlideover"
    x-transition:enter="transition duration-500"
    x-transition:enter-start="translate-x-8 opacity-0"
    x-transition:enter-end="translate-x-0 opacity-100"
    x-transition:leave="transition duration-500"
    x-transition:leave-start="translate-x-0 opacity-100"
    x-transition:leave-end="translate-x-8 opacity-0"
  ></div>

  {# Panel #}
  <div
    x-dialog:panel
    aria-live="polite"
    class="fixed inset-y-0 right-0 w-[var(--panel-w)] 3xl:w-[var(--3xl-panel-w)]"
  >
    {% if panelContent %}
      <div
        x-ref="panel-content"
        x-show="showSlideover"
        x-transition.opacity.duration.500ms
        class="absolute inset-0 overflow-auto -ml-[var(--panel-away-w)] 3xl:-ml-[calc(100vw-var(--3xl-panel-w))]"
      >
        <div class="container">{{ panelContent }}</div>
      </div>
    {% endif %}

    {% if fixedContent %}
      <div
        x-show="showSlideover"
        x-transition.opacity.duration.500ms
        aria-live="polite"
        class="absolute inset-0 bg-white pointer-events-none"
      >
        {{ fixedContent }}
      </div>
    {% endif %}

    {# Nav and close buttons #}
    <div
      x-show="showSlideover"
      x-transition.opacity.duration.500ms
      class="absolute inset-0 pointer-events-none -ml-[var(--panel-away-w)] 3xl:-ml-[calc(100vw-var(--3xl-panel-w))]"
    >
      <div class="container">
        <div class="sticky top-0 inset-x-0 pt-8 md:pt-[52px] 2xl:pt-[60px]">
          <div class="grid grid-cols-12 lg:gap-x-16">
            <div class="col-span-full lg:col-span-10 lg:col-start-3">
              <div class="base-mono flex items-center {% if closeButtonPosition == "left" %} gap-x-2 justify-end lg:justify-between {% else %} justify-end {% endif %}">

                {# Close #}
                {% if navStyle == "icon" and showCloseButton %}

                  <button
                    type="button"
                    @click="$dialog.close()"
                    @keydown.escape.window="$dialog.close()"
                    class="pointer-events-auto transition ease-in-out duration-200 hover:text-coral-red hover:rotate-90"
                    aria-label="Close modal"
                  >
                    <span>{{ svg('@webroot/dist/images/icon--close.svg', true, true)|attr({ class: 'w-[38px] md:w-[44px]' }) }}</span>
                  </button>

                {% elseif showCloseButton %}

                  <button
                    type="button"
                    @click="$dialog.close()"
                    @keydown.escape.window="$dialog.close()"
                    class="pointer-events-auto group"
                  >
                    <span>[Esc] <span class="group-hover:underline">Close</span></span>
                  </button>

                {% endif %}

                {# Nav #}
                <div class="flex items-center justify-end gap-x-2">

                  {# Prev #}
                  {% if navStyle == "icon" and showNav %}

                    <button
                      class="pointer-events-auto transition ease-in-out duration-200 hover:text-coral-red"
                      :class="{ 'pointer-events-none !text-gray-300': !hasPrev() }"
                      :tabindex="hasPrev() ? 0 : -1"
                      aria-label="Previous project"
                      @click="prev()"
                      @keydown.left.window="showSlideover && prev()"
                    >
                      <span>{{ svg('@webroot/dist/images/icon--arrow-right-circ.svg', true, true)|attr({ class: 'w-[38px] md:w-[44px] rotate-180' }) }}</span>
                    </button>

                  {% elseif showNav %}

                    <button
                      class="pointer-events-auto group"
                      :class="{ 'pointer-events-none text-gray-100': !hasPrev() }"
                      :tabindex="hasPrev() ? 0 : -1"
                      aria-label="Previous project"
                      @click="prev()"
                      @keydown.left.window="showSlideover && prev()"
                      >
                      <span>[&#8592;] <span class="group-hover:underline">Previous</span></span>
                    </button>

                    <span class="text-gray-100"> / </span>

                  {% endif %}

                  {# Next #}
                  {% if navStyle == "icon" and showNav %}

                    <button
                      class="pointer-events-auto transition ease-in-out duration-200 hover:text-coral-red"
                      :class="{ 'pointer-events-none !text-gray-100': !hasNext() }"
                      :tabindex="hasNext() ? 0 : -1"
                      aria-label="Next project"
                      @click="next()"
                      @keydown.right.window="showSlideover && next()"
                    >
                      <span>{{ svg('@webroot/dist/images/icon--arrow-right-circ.svg', true, true)|attr({ class: 'w-[38px] md:w-[44px]' }) }}</span>
                    </button>

                  {% elseif showNav %}

                    <button
                      class="pointer-events-auto group"
                      :class="{ 'pointer-events-none text-gray-400': !hasNext() }"
                      :tabindex="hasNext() ? 0 : -1"
                      aria-label="Next project"
                      @click="next()"
                      @keydown.right.window="showSlideover && next()"
                    >
                      <span><span class="group-hover:underline">Next</span> [&#8594;] </span>
                    </button>

                  {% endif %}

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div> {# /Panel #}

  {# Click away region #}
  <div
    @click="$dialog.close()"
    class="cursor-w-resize fixed left-0 inset-y-0 w-[var(--panel-away-w)] 3xl:w-[var(--3xl-panel-away-w)]"
  ></div>

</div> {# /Slideover #}
